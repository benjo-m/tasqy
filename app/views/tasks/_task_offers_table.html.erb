<div data-controller="note-modal" data-note-modal-offers-value="<%= offers.to_json %>" class="overflow-hidden rounded-md border border-gray-300 mt-4">
  <table class="table-auto border-collapse w-full">
    <thead>
      <tr class="text-white" style="background-color: #b3b8c9;">
        <th class="px-4 py-2">User</th>
        <th class="px-4 py-2">Price</th>
        <th class="px-4 py-2">Date and time</th>
        <th class="px-4 py-2">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% offers.each do |offer| %>
        <tr class="<%= offer.status == 'accepted' ? 'bg-green-200' : 'odd:bg-white even:bg-gray-50' %> text-center">
          <td class="px-4 py-2 underline"><%= link_to offer.user.username, offer.user %></td>
          <td class="px-4 py-2"><%= offer.price %> BAM</td>
          <td class="px-4 py-2"><%= "#{offer.date.to_fs(:long)} at #{offer.time.to_formatted_s(:time)}" %></td>
          <td class="px-4 py-2 flex gap-2 justify-center">
            <% if offer.status == 'pending' && offer.task.assignee == nil %>
              <%= button_to "Accept", task_accept_path(offer.task_id, offer), method: :patch, class: "bg-green-400 text-white px-2 py-1 rounded cursor-pointer" %>
              <%= button_to "Decline", task_decline_path(offer.task_id, offer), method: :patch, class: "bg-red-400 text-white px-2 py-1 rounded cursor-pointer" %>
            <% elsif offer.status == 'accepted' %>
              <%= button_to "Cancel", task_cancel_path(offer.task_id, offer), method: :patch, class: "bg-red-400 text-white px-2 py-1 rounded cursor-pointer" %>
            <% elsif offer.status == 'declined' %>
              <p class="text-red-500 font-bold">Offer declined</p>
            <% else %>
              <button class="bg-gray-200 text-white px-2 py-1 rounded">Accept</button>
              <button class="bg-gray-200 text-white px-2 py-1 rounded">Decline</button>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
